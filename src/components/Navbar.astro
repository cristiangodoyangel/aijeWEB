
---
import { Menu, Moon, Sun, X } from 'lucide-astro';
---

<nav class="fixed w-full z-50 transition-colors duration-300 bg-white/90 dark:bg-black/90 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800">
	<div class="max-w-7xl mx-auto px-8 sm:px-6 lg:px-8">
		<div class="flex items-center justify-between h-20">
			<!-- Logo -->
			<div class="flex-shrink-0">
				<a href="/" class="flex items-center gap-2">
					<img src="/assets/img/logo.png" alt="AIJE Logo" class="h-16 w-auto" />
					
				</a>
			</div>

			<!-- Desktop Menu -->
			<div class="hidden md:block">
				<div class="ml-10 flex items-baseline space-x-8">
					<a href="#" class="text-gray-900 dark:text-gray-100 hover:text-primary dark:hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors">Inicio</a>
					<a href="#services" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors">Servicios</a>
					<a href="#industrial" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors">Servicios Industriales</a>
					<a href="#clients" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors">Clientes</a>
					<a href="#contact" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors">Contacto</a>
				</div>
			</div>

			<!-- Actions -->
			<div class="hidden md:flex items-center gap-4">
							<!-- Actions -->
			<div class="hidden md:flex items-center gap-4">
				<button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
					<Sun id="theme-toggle-light-icon" class="hidden w-5 h-5" />
					<Moon id="theme-toggle-dark-icon" class="hidden w-5 h-5" />
				</button>
			</div>
			
			<!-- Mobile menu button -->
			<div class="md:hidden flex items-center">
				<button id="mobile-menu-btn" class="text-gray-600 dark:text-gray-300 hover:text-primary p-2">
					<Menu class="w-6 h-6" />
				</button>
			</div>
		</div>
	</div>

	<!-- Mobile Menu -->
	<div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-gray-800">
		<div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
			<a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-900 dark:text-white hover:text-primary dark:hover:text-primary">Inicio</a>
			<a href="#services" class="block px-3 py-2 rounded-md text-base font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary">Servicios</a>
			<a href="#industrial" class="block px-3 py-2 rounded-md text-base font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary">Servicios Industriales</a>
			<a href="#clients" class="block px-3 py-2 rounded-md text-base font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary">Clientes</a>
			<a href="#contact" class="block px-3 py-2 rounded-md text-base font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary">Contacto</a>
		</div>
	</div>
</nav>

<script is:inline>
	const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
	const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
	const themeToggleBtn = document.getElementById('theme-toggle');

	// Change the icons inside the button based on previous settings
	if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
		themeToggleLightIcon?.classList.remove('hidden');
		themeToggleDarkIcon?.classList.add('hidden');
	} else {
		themeToggleLightIcon?.classList.add('hidden');
		themeToggleDarkIcon?.classList.remove('hidden');
	}

	themeToggleBtn?.addEventListener('click', function() {
		// toggle icons inside button
		themeToggleDarkIcon?.classList.toggle('hidden');
		themeToggleLightIcon?.classList.toggle('hidden');

		// if set via local storage previously
		if (localStorage.getItem('color-theme')) {
			if (localStorage.getItem('color-theme') === 'light') {
				document.documentElement.classList.add('dark');
				localStorage.setItem('color-theme', 'dark');
			} else {
				document.documentElement.classList.remove('dark');
				localStorage.setItem('color-theme', 'light');
			}
		// if NOT set via local storage previously
		} else {
			if (document.documentElement.classList.contains('dark')) {
				document.documentElement.classList.remove('dark');
				localStorage.setItem('color-theme', 'light');
			} else {
				document.documentElement.classList.add('dark');
				localStorage.setItem('color-theme', 'dark');
			}
		}
	});

	const mobileMenuBtn = document.getElementById('mobile-menu-btn');
	const mobileMenu = document.getElementById('mobile-menu');

	// Mobile menu logic
	mobileMenuBtn?.addEventListener('click', () => {
		mobileMenu?.classList.toggle('hidden');
	});
</script>
